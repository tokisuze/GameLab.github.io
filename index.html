<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arcade Lab (stable)</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
<header class="header">
  <div class="container header-inner">
    <div class="brand">üéÆ Arcade Lab (stable)</div>
    <div class="spacer"></div>
    <button class="btn" id="armedToggle" type="button">üî´ Armed Mode</button>
    <button class="btn" id="mysteryBtn" type="button">‚ùì Mystery</button>
    <!-- Music —É–±—Ä–∞–ª–∏ ‚Äî —Ç–µ–ø–µ—Ä—å –µ—ë –≤–∫–ª—é—á–∞–µ—Ç Armed Mode -->
    <button class="btn" id="repairBtn" type="button">üõ†Ô∏è Repair</button>
    <button class="btn" id="themeBtn" type="button">üåì –°–º–µ–Ω–∏—Ç—å</button>
    <button class="btn" id="consoleBtn" type="button">‚å®Ô∏è –û—Ç–∫—Ä—ã—Ç—å</button>
  </div>
</header>

<div id="armedBanner">Armed Mode –≤–∫–ª—é—á—ë–Ω. Esc/Q/–ü–ö–ú ‚Äî –≤—ã—Ö–æ–¥.</div>
<div id="musicStatus" aria-live="polite">Music: OFF</div>

<main class="container">
  <p style="color:var(--muted)"></p>
  <div class="grid">
    <!-- –±—ã–ª–æ -->
    <article class="card">
      <h3>Reaction Test</h3>
      <p>–ö–ª–∏–∫–Ω–∏, –∫–æ–≥–¥–∞ –ø–æ–ª–µ —Å—Ç–∞–Ω–µ—Ç –∑–µ–ª—ë–Ω—ã–º.</p>
      <div class="actions"><a class="btn" href="games/reaction.html">–ò–≥—Ä–∞—Ç—å</a></div>
    </article>
    <article class="card">
      <h3>Snake</h3>
      <p>–ö–ª–∞—Å—Å–∏–∫–∞ ‚Äî —Å–æ–±–µ—Ä–∏ —è–±–ª–æ–∫–∏.</p>
      <div class="actions"><a class="btn" href="games/snake.html">–ò–≥—Ä–∞—Ç—å</a></div>
    </article>
    <article class="card">
      <h3>Pong vs CPU</h3>
      <p>–û—Ç–±–∏–≤–∞–π –º—è—á –∏ –æ–±—ã–≥—Ä–∞–π –∫–æ–º–ø—å—é—Ç–µ—Ä.</p>
      <div class="actions"><a class="btn" href="games/pong.html">–ò–≥—Ä–∞—Ç—å</a></div>
    </article>

    <!-- –¥–æ–±–∞–≤–∏–ª -->
    <article class="card">
      <h3>Mini DOOM</h3>
      <p>–®–∞—Ä, —Å—Ç–µ–Ω—ã, –≤—Ä–∞–≥–∏, –ø–æ—Ä—Ç–∞–ª –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å.</p>
      <div class="actions"><a class="btn" href="games/minidoom.html">–ò–≥—Ä–∞—Ç—å</a></div>
    </article>

    <article class="card">
      <h3>Duck Hunt mini</h3>
      <p>–°—Ç—Ä–µ–ª—è–π –ø–æ —É—Ç–∫–∞–º. –ü–∞—Ç—Ä–æ–Ω—ã = –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É—Ç–æ–∫ –≤ —Ä–∞—É–Ω–¥–µ.</p>
      <div class="actions"><a class="btn" href="games/ducks.html">–ò–≥—Ä–∞—Ç—å</a></div>
    </article>

    <article class="card">
      <h3>Dodge (1‚Äì2 –∏–≥—Ä–æ–∫–∞)</h3>
      <p>–£–≤–æ—Ä–∞—á–∏–≤–∞–π—Å—è –æ—Ç —Å–Ω–∞—Ä—è–¥–æ–≤. WASD –∏ —Å—Ç—Ä–µ–ª–∫–∏. –°—á—ë—Ç—á–∏–∫ —Ä–µ–∫–æ—Ä–¥–æ–≤.</p>
      <div class="actions"><a class="btn" href="games/dodge.html">–ò–≥—Ä–∞—Ç—å</a></div>
    </article>

    <article class="card">
      <h3>GeoDash ‚Äî mini (slow)</h3>
      <p>–ó–∞–º–µ–¥–ª–µ–Ω–Ω—ã–π –¥–∂–∞–º–ø-—Ä–∞–Ω–Ω–µ—Ä —Å —à–∏–ø–∞–º–∏, —è–º–∞–º–∏ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏.</p>
      <div class="actions"><a class="btn" href="games/geodash.html">–ò–≥—Ä–∞—Ç—å</a></div>
    </article>
  </div>
</main>

<!-- ===== Promo (friends) START ===== -->
<section id="demo-ads" style="margin:24px 0">
  <div style="display:flex;gap:12px;align-items:center;margin-bottom:10px">
    <strong>üîó –†–∞–±–æ—Ç—ã –¥—Ä—É–∑–µ–π</strong>
    <span style="margin-left:auto;font-size:12px;color:#9aa2ad">–ü–æ–¥–±–æ—Ä –º–µ–Ω—è–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ</span>
  </div>


  <div id="ads-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px"></div>
  <div id="ads-rotator" style="margin-top:12px;position:relative;height:110px;border:1px solid #2a3947;border-radius:12px;overflow:hidden;background:#0f1720"></div>
</section>


<script>
(() => {
  /* ===== –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ===== */
  const GRID_SLOTS = 4;           // —Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —Å–µ—Ç–∫–µ
  const ROTATE_EVERY_MS = 6000;   // –∞–≤—Ç–æ—Å–º–µ–Ω–∞ —Å–ª–∞–π–¥–∞ –∫–∞—Ä—É—Å–µ–ª–∏
  const SELECTION_MODE = 'daily'; // 'daily' (—Ñ–∏–∫—Å –Ω–∞ —Å—É—Ç–∫–∏) –∏–ª–∏ 'refresh'


  /* ===== —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç ===== */
  const ITEMS = [
    { id:'k1', title:'–£ –ú–ï–ù–Ø –¢–í–û–ô –ù–û–°–ò–ö', text:'–ê–•–•–ê–ê–•–ê–•–ê–•–ê–•–ê–•', emoji:'üéÆ', url:'https://example.com/artem', bg:'assets/photo_2025-05-30_20-04-34.jpg' },
    { id:'k2', title:'–õ–Ø –ü–ê–°–¨–û–ù', text:'–ù–£ –ò –ì–ù–ò–î–ê –¢–´ –î–ï–ö–°–¢–ï–†', emoji:'üé®', url:'https://example.com/masha', bg:'assets/logo.png' },
    { id:'k3', title:'–í–û–¢ –≠–¢–û –ö–û–ú–ë–û', text:'–ê–•–•–ê–ê–•–ê–•–ê–•', emoji:'üßÆ', url:'https://example.com/dima', bg:'assets/photo_2025-08-01_20-46-31 (1).jpg' },
    { id:'k4', title:'–ì–∞–¥ –¥–µ–º —Ñ–∞–∫', text:'–ø–∏—Ç—å –≥—É–ª—è—Ç—å', emoji:'üß©', url:'https://example.com/ira', bg:'assets/photo_2025-08-02_13-49-01.jpg' }
    // ...–¥–æ–±–∞–≤—å –æ—Å—Ç–∞–ª—å–Ω—ã—Ö (–¥–æ 20+), –∫–∞–∂–¥–æ–º—É —É–∫–∞–∂–∏ bg
  ];


  const grid = document.getElementById('ads-grid');
  const rot  = document.getElementById('ads-rotator');


  /* ===== –≤—ã–±–æ—Ä –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤ ===== */
  function seedForToday(){
    const d=new Date(), k=`${d.getUTCFullYear()}${d.getUTCMonth()+1}${d.getUTCDate()}`;
    let s=0; for(let i=0;i<k.length;i++) s=(s*131 + k.charCodeAt(i))>>>0;
    return s||1;
  }
  function rng(seed){ let s=seed>>>0||1; return ()=> (s=(s*1664525+1013904223)>>>0)/2**32; }
  function pickUnique(arr, n, rnd=Math.random){
    const taken=new Set(), out=[];
    while(out.length<n && taken.size<arr.length){
      const i=Math.floor(rnd()*arr.length);
      if(!taken.has(i)){ taken.add(i); out.push(arr[i]); }
    }
    return out;
  }


  const rand = (SELECTION_MODE==='daily') ? rng(seedForToday()) : Math.random;
  const gridItems = pickUnique(ITEMS, Math.min(GRID_SLOTS, ITEMS.length), rand);
  const rest      = ITEMS.filter(x => !gridItems.includes(x));
  const rotItems  = pickUnique(rest.length?rest:ITEMS, Math.min(8, rest.length||ITEMS.length), rand);


  /* ===== —Ä–µ–Ω–¥–µ—Ä —Å–µ—Ç–∫–∏ ===== */
  function renderGrid(items){
    grid.innerHTML = items.map(i => `
      <article data-id="${i.id}" style="
        background:url('${i.bg||''}') center/cover no-repeat, #0f1720;
        border:1px solid #23303a;
        padding:12px;
        border-radius:12px;
        display:flex;
        flex-direction:column;
        gap:10px;
        min-height:160px;
        color:#fff;
      ">
        <div style="display:flex;gap:10px;align-items:center;background:rgba(0,0,0,0.5);padding:4px 6px;border-radius:8px;">
          <div style="width:40px;height:40px;border-radius:8px;background:#17202a;
                      display:flex;align-items:center;justify-content:center;font-size:20px">
            ${i.emoji}
          </div>
          <div>
            <div style="font-weight:700;color:#fff">${esc(i.title)}</div>
          </div>
        </div>
        <div style="color:#fff;font-size:13px;flex:1;background:rgba(0,0,0,0.4);padding:4px 6px;border-radius:6px;">${esc(i.text)}</div>
        <div style="display:flex;gap:8px;align-items:center">
          <a class="open-link" data-id="${i.id}" href="${escAttr(i.url)}" 
             target="_blank" rel="noopener noreferrer"
             style="background:linear-gradient(180deg,#2ea1bf,#1c7d95);color:#fff;
                    padding:8px 10px;border:none;border-radius:8px;
                    cursor:pointer;text-decoration:none">
            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å
          </a>
        </div>
      </article>
    `).join('');
  }


  /* ===== –∫–∞—Ä—É—Å–µ–ª—å ===== */
  let idx = 0;
  function renderSlide(){
    const i = rotItems[idx % rotItems.length]; idx++;
    rot.innerHTML = `
      <div style="position:absolute;inset:0;display:flex;gap:12px;align-items:center;padding:12px;
                  background:url('${i.bg||''}') center/cover no-repeat, #0f1720;">
        <div style="width:64px;height:64px;border-radius:12px;background:rgba(0,0,0,0.5);
                    display:flex;align-items:center;justify-content:center;font-size:28px">${i.emoji}</div>
        <div style="min-width:0;background:rgba(0,0,0,0.5);padding:6px 10px;border-radius:8px">
          <div style="font-weight:700;color:#fff">${esc(i.title)}</div>
          <div style="color:#ddd;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${esc(i.text)}</div>
          <div style="margin-top:6px">
            <a class="open-link" data-id="${i.id}" href="${escAttr(i.url)}" target="_blank" rel="noopener noreferrer"
               style="background:#273549;color:#cfe7ff;border:1px solid #365066;padding:6px 10px;border-radius:8px;cursor:pointer;text-decoration:none">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
          </div>
        </div>
      </div>`;
  }


  /* ===== init ===== */
  renderGrid(gridItems);
  renderSlide();
  setInterval(renderSlide, ROTATE_EVERY_MS);


  /* helpers */
  function esc(s){return (s+'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));}
  function escAttr(s){return esc(s).replace(/"/g,'&quot;');}
})();
</script>
<!-- ===== Promo (friends) END ===== -->

<footer class="footer">¬© Arcade Lab.</footer>

<!-- Overlay –¥–ª—è Armed Mode -->
<div id="armedOverlay" aria-hidden="true">
  <div id="cross"></div>

  <!-- DOOM HUD: –ø–æ–ª–æ–∂–∏ —Ñ–∞–π–ª—ã –≤ /assets/ —Å —Ç–∞–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ -->
  <img id="doomHud"  class="hud"      src="assets/doom_idle.png" alt="">
  <img id="doomFire" class="hud fire" src="assets/doom_fire.png"  alt="">
</div>

<script src="assets/clean.js"></script>
<script src="assets/armed.js"></script>
</body>
</html>
